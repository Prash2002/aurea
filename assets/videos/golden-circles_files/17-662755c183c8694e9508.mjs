(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[17],{"+HMQ":function(e,t,a){a("q1tI");var n=a("zLLH");t.a=Object(n.c)({name:"BoardInvitesResource",options:e=>({board_id:e.board.id,field_set_key:"boardEdit",status_filters:"new,accepted,contact_request_not_approved",sort:"viewer_first",include_inactive:!0}),key:"invites"})((function({board:{id:e,owner:t},invites:{data:a,isLoaded:n},children:o}){const r=t.image_key||t.image_medium_url||t.image_small_url,i=[{name:t.full_name,src:r,href:`/${t.username}/`,isDim:!1}];return n&&a&&a.length>0&&a.forEach(e=>{i.push({name:e&&e.invited_user?e.invited_user.full_name:"",src:e&&e.invited_user?e.invited_user.image_medium_url:"",href:e&&e.invited_user?`/${e.invited_user.username}/`:"",isDim:e&&["new","contact_request_not_approved"].includes(e.status)})}),o(i)}))},"+wrf":function(e,t,a){var n=a("q1tI"),o=a.n(n),r=a("/MKj"),i=a("ViqK"),l=a("Ye/N"),s=a("joD6"),c=a("xdpg"),d=a("n6mq");var h=Object(s.a)(class extends n.Component{getSubtitleText(e,t,a){const n=this.props.invite.invited_by_user.full_name;return e?l.a._("That's you","subtext for current user who requested to join this board","subtext for current user who requested to join this board"):t?l.a._("Invited by you","subtext for a pending collaborator who was invited by the current viewer","subtext for a pending collaborator who was invited by the current viewer"):a?l.a._("Requested to join","The subtext that identifies a pending collaborator has personally requested to join the board","The subtext that identifies a pending collaborator has personally requested to join the board"):Object(c.c)(l.a._("Invited by {{ user_full_name }}","The subtext that identifies a pending collaborator who was invited to collaborate on the board","The subtext that identifies a pending collaborator who was invited to collaborate on the board"),{user_full_name:n})}getDeclineDeleteText(e,t,a){return e?l.a._("Leave","[button] for a collaborator to leave a group board","[button] for a collaborator to leave a group board"):t&&!a?l.a._("Decline","[button] decline another pinner's request to join board as a collaborator","[button] decline another pinner's request to join board as a collaborator"):l.a._("Remove","[button] remove a collaborator from the board]","[button] remove a collaborator from the board]")}render(){const{onApprove:e,isDim:t,onDelete:a,actionsDisabled:o,viewer:r,invite:{access:s,status:c,invited_by_user:h,invited_user:m}}=this.props,u=m.id===r.id,g=h.id===r.id,b=m.id===h.id,p="accepted"===c,v=s.includes("approve"),E=s.includes("delete"),f=l.a._("Approve","[button] approve another pinner's request to join the board as a collaborator","[button] approve another pinner's request to join the board as a collaborator"),_=this.getDeclineDeleteText(u,b,p),y=E&&!v,C=E&&v,w=`/${m.username}/`;return n.createElement(d.d,null,n.createElement(i.a,{imageUrl:m.image_medium_url||"",name:m.full_name,title:m.full_name,subtitle:this.getSubtitleText(u,g,b),linkURL:w,isDim:void 0!==t?t:!p,accessory:y&&n.createElement(d.e,{inline:!0,disabled:o,onClick:a,text:_,size:"lg"})}),C&&n.createElement(d.d,{paddingX:3,marginStart:12,display:"flex",justifyContent:"end"},n.createElement(d.d,{paddingX:1,flex:"grow",width:"50%"},n.createElement(d.e,{disabled:o,onClick:a,text:_,size:"lg"})),n.createElement(d.d,{paddingX:1,flex:"grow",width:"50%"},n.createElement(d.e,{color:"red",disabled:o,onClick:e,text:f,size:"lg"}))))}}),m=a("4dcN"),u=a("CvCA"),g=a("fArA"),b=a("L2iP"),p=a("ZE2w"),v=a("TiQD"),E=a("vvax");function f(e){const{onCancel:t,onRemove:a,useGestaltModal:n}=e,r=l.a._("Are you sure you want to leave this group board and remove it from your profile?"),i=n?d.B:v.b;return o.a.createElement(i,{accessibilityModalLabel:l.a._("Leave board?"),heading:l.a._("Leave board?"),onDismiss:t,size:"sm",footer:o.a.createElement(d.d,{display:"flex",justifyContent:"end"},o.a.createElement(d.d,{paddingX:1},o.a.createElement(d.e,{inline:!0,onClick:t,text:l.a._("Cancel")})),o.a.createElement(d.d,{paddingX:1},o.a.createElement(d.e,{color:"red",inline:!0,onClick:a,text:l.a._("Leave")})))},o.a.createElement(d.d,{padding:5},o.a.createElement(d.R,null,r)))}class _ extends n.Component{constructor(...e){var t,a,n;super(...e),n={shouldBlock:!1},(a="state")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n}getBlockDescription(e,t){return"declineRequest"===e?t?Object(E.b)(l.a._("This will decline {{ invited_user_first_name }} from joining this board and block them from subsequent collaboration requests.","decline another pinner's request to join board as a collaborator and block them","decline another pinner's request to join board as a collaborator and block them"),{invited_user_first_name:t}):l.a._("This will decline this person from joining this board and block them from subsequent collaboration requests.","message that explains consequences of declining a request to join board as a collaborator","message that explains consequences of declining a request to join board as a collaborator"):t?Object(E.b)(l.a._("This will remove {{ invited_user_first_name }}, people {{ invited_user_first_name }} invited, and all their Pins."),{invited_user_first_name:t}):l.a._("This will remove this person, people they invited, and all their Pins.","message that explains consequences of removing a collaborator","message that explains consequences of removing a collaborator")}render(){const{removeType:e,firstName:t,fullName:a,onCancel:r,onRemove:i,onRemoveAndBlock:s,useGestaltModal:c}=this.props,h="declineRequest"===e?Object(E.b)(l.a._("Decline {{ invited_user_name }}?","[button] to decline a pinner's request to join a board as a collaborator","[button] to decline a pinner's request to join a board as a collaborator"),{invited_user_name:a}).join(""):Object(E.b)(l.a._("Remove {{ invited_user_name }}?","[button] to remove a pinner as a collaborator from a group board","[button] to remove a pinner as a collaborator from a group board"),{invited_user_name:a}).join(""),m=l.a._("This will keep them from saving Pins to this board. You can also:","decline another pinner's request to join board as collaborator. Ending fragment preceeds checkbox for blocking the user.","decline another pinner's request to join board as collaborator. Ending fragment preceeds checkbox for blocking the user."),u=this.getBlockDescription(e,t),g=this.state.shouldBlock?l.a._("Block","block another pinner after denying their request to collaborate on a board","block another pinner after denying their request to collaborate on a board"):l.a._("Remove","decline another pinner's request to collaborate on a board","decline another pinner's request to collaborate on a board"),b=o.a.createElement(n.Fragment,null,o.a.createElement(d.d,{padding:5},o.a.createElement(d.R,null,m)),o.a.createElement(d.l,null),o.a.createElement(d.d,{padding:5,display:"flex"},o.a.createElement(d.d,{paddingX:1},o.a.createElement(d.g,{checked:this.state.shouldBlock,id:"banUser",name:"ban",onChange:()=>this.setState({shouldBlock:!this.state.shouldBlock})})),o.a.createElement(d.d,{paddingX:1},o.a.createElement(d.t,{htmlFor:"banUser"},o.a.createElement(d.R,{weight:"bold"},Object(E.b)(l.a._("Block {{ name }}"),{name:t||""})),o.a.createElement(d.R,{size:"md"},u))))),p=c?d.B:v.b;return o.a.createElement(p,{accessibilityModalLabel:h,heading:h,onDismiss:r,size:"sm",footer:o.a.createElement(d.d,{display:"flex",justifyContent:"end",marginStart:-1,marginEnd:-1},o.a.createElement(d.d,{paddingX:1},o.a.createElement(d.e,{inline:!0,onClick:r,text:l.a._("Cancel")})),o.a.createElement(d.d,{paddingX:1},o.a.createElement(d.e,{color:"red",inline:!0,onClick:this.state.shouldBlock?s:i,text:g})))},b)}}var y=a("nGHF");function C(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const w="collaborator_decline_invite",S="collaborator_delete_invite",I=3e3;t.a=Object(g.compose)(Object(r.connect)(null,(e,t)=>{const{invite:a,invite:{invited_user:{id:n},board:{id:o}}}=t;return{approveBoardCollabInvite:()=>e(Object(p.a)(o,n)),deleteBoardCollabInvite:(t,n)=>e(Object(p.b)(a,t,n))}}),s.a,y.c)(class extends n.Component{constructor(...e){super(...e),C(this,"state",{currentModal:null,loading:!1}),C(this,"showRemoveSuccessToast",()=>{const{toastManagerContext:e}=this.props,t=l.a._("Collaborator removed","BoardCollabInviteCellContainer.toast","Toast for removing a collaborator from a board");e.showOneToast(({onHide:e})=>n.createElement(u.a,{color:"darkGray",duration:I,onHide:e,text:t}))}),C(this,"onDelete",()=>{const{onModalOpen:e}=this.props;e&&e(),this.setState({currentModal:"delete"})}),C(this,"onApprove",()=>{const{approveBoardCollabInvite:e,onInviteDidUpdate:t}=this.props;this.setState({loading:!0}),e().then(t).finally(()=>{this.setState({loading:!1})})}),C(this,"deleteBoardInvite",(e=!1)=>{const{deleteBoardCollabInvite:t,onBoardLeave:a,onInviteDidUpdate:n}=this.props,o=this.isViewerInvitedUser,r=o?w:S;m.a.trackEvent(r,"click"),this.setState({currentModal:null,loading:!0}),t(o,e).then(()=>{m.a.trackEvent(r,"success"),n(),this.showRemoveSuccessToast(),o&&a()}).catch(()=>{m.a.trackEvent(r,"error")}).finally(()=>{this.setState({loading:!1})})}),C(this,"handleDeleteBoardInvite",()=>{this.deleteBoardInvite(!1)}),C(this,"handleDeleteBoardInviteAndBan",()=>{this.deleteBoardInvite(!0)}),C(this,"handleHideModal",()=>{this.setState({currentModal:null})})}get isViewerInvitedUser(){const{viewer:e,invite:{invited_user:t}}=this.props;return e.isAuth&&e.id===t.id}get isRequestToJoin(){const{invite:{invited_user:e,invited_by_user:t}}=this.props;return e.id===t.id}renderCurrentModal(){const{invite:{invited_user:e},useGestaltModal:t=!1}=this.props,{currentModal:a}=this.state;return"delete"===a?this.isViewerInvitedUser?n.createElement("div",{style:{position:"absolute",zIndex:b.h+1}},n.createElement(f,{onCancel:this.handleHideModal,onRemove:this.handleDeleteBoardInvite,useGestaltModal:t})):n.createElement("div",{style:{position:"absolute",zIndex:b.h+1}},n.createElement(_,{removeType:this.isRequestToJoin?"declineRequest":"removeCollaborator",firstName:e.first_name,fullName:e.full_name,onCancel:this.handleHideModal,onRemove:this.handleDeleteBoardInvite,onRemoveAndBlock:this.handleDeleteBoardInviteAndBan,useGestaltModal:t})):null}render(){const{invite:e,isDim:t}=this.props,{loading:a}=this.state;return n.createElement(d.d,null,n.createElement(h,{invite:e,isDim:t&&"accepted"!==e.status,onDelete:this.onDelete,onApprove:this.onApprove,actionsDisabled:a}),this.renderCurrentModal())}})},"0rqM":function(e,t,a){a.d(t,"a",(function(){return l}));var n=a("q1tI"),o=a("Ye/N"),r=a("TiQD"),i=a("n6mq");function l({cancelButtonLabel:e,confirmButtonLabel:t,heading:a,message:l,onCancel:s,onConfirm:c}){const d=a||o.a._("Are you sure?"),h=e||o.a._("Cancel");return n.createElement(r.b,{accessibilityModalLabel:d,footer:n.createElement(i.d,{marginEnd:-1,marginStart:-1},n.createElement(i.d,{"data-test-id":"cancel-button",padding:1},n.createElement(i.e,{onClick:s,size:"lg",text:h})),n.createElement(i.d,{"data-test-id":"confirm-button",padding:1},n.createElement(i.e,{color:"red",onClick:c,size:"lg",text:t}))),heading:d,onDismiss:s,role:"alertdialog"},n.createElement(i.d,{padding:4},n.createElement(i.R,null,l)))}},"3j7w":function(e,t,a){a.d(t,"a",(function(){return o}));var n=a("q1tI");class o extends n.PureComponent{constructor(...e){var t,a,n;super(...e),n=()=>{const{isAtEnd:e,isFetching:t,fetchMore:a,scrollBuffer:n,scrollHeight:o,scrollTop:r}=this.props;e||t||r+n>o&&a()},(a="check")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n}componentDidMount(){setTimeout(this.check)}componentDidUpdate(){this.check()}render(){return null}}},"88U9":function(e,t,a){a.d(t,"a",(function(){return o}));const n=3;function o(e,t){const a=t.length>n;return{limitedCollaborators:t.slice(0,a?2:3),overflowNumber:a?e-n+1:0}}},"8Mj5":function(e,t,a){var n=a("q1tI"),o=a.n(n),r=a("n6mq");function i({children:e}){return o.a.createElement(r.d,{dangerouslySetInlineStyle:{__style:{boxShadow:"0 0 0 1px #fff"}},rounding:"circle"},e)}var l=a("Ye/N");function s({onClick:e,overlap:t,size:a}){return o.a.createElement(r.d,{marginStart:t},o.a.createElement(i,null,o.a.createElement(r.r,{accessibilityLabel:l.a._("Add","facePile.addButton","Accessibility label for button to add a collaborator"),bgColor:"lightGray",icon:"add",iconColor:"darkGray",onClick:e,size:a})))}function c({style:e}){return o.a.createElement(r.d,{bottom:!0,dangerouslySetInlineStyle:{__style:e||{}},left:!0,position:"absolute",right:!0,rounding:"pill",top:!0})}function d({children:e,hovered:t}){return o.a.createElement(r.d,{position:"relative"},o.a.createElement(c,{style:t?{zIndex:1,backgroundColor:"rgba(0,0,0,0.06)"}:null}),e)}const h=48;function m({addButtonRef:e,hovered:t,overlap:a}){return o.a.createElement(r.d,{dangerouslySetInlineStyle:{__style:{zIndex:1}},key:"addIcon"},o.a.createElement(r.d,{marginStart:a},o.a.createElement(d,{hovered:t},o.a.createElement(i,null,o.a.createElement(r.d,{alignItems:"center",color:"lightGray",display:"flex",height:h,justifyContent:"center",ref:e,rounding:"circle",width:h},o.a.createElement(r.q,{accessibilityLabel:l.a._("Add","ui.Facepile","Accessibility label on icon"),icon:"add",color:"darkGray",size:20}))))))}const u={xs:24,sm:32,md:40,lg:48,xl:56};function g({count:e,size:t}){const a=u[t];return o.a.createElement(i,null,o.a.createElement(r.d,{alignItems:"center",color:"lightGray",display:"flex",height:a,justifyContent:"center",position:"relative",rounding:"circle",width:a},o.a.createElement(r.R,{size:"lg",weight:"bold"},e>99?"99+":e)))}var b=a("7pfs"),p=a("Cufx");function v({isDim:e,name:t,size:a,src:n}){const i=u[a];return o.a.createElement(r.d,{color:"white",height:i,width:i,rounding:"circle"},o.a.createElement(r.d,{dangerouslySetInlineStyle:{__style:{opacity:e?.5:1}}},o.a.createElement(p.a,{name:t,outline:!0,src:n})))}function E({addButtonRef:e,additionalCount:t,faces:a,faceSize:n,onAddClick:i,onClick:l,oneClickTargetFacepile:c,overlap:h,pileRef:u,showAddButton:p}){const E=({apply:e,children:t})=>o.a.createElement(r.d,{marginStart:e?h:void 0},t);return o.a.createElement(b.a,null,({hovered:b,onMouseEnter:f,onMouseLeave:_})=>{const y=a.map(({isDim:e,key:t,name:a,src:r},i)=>o.a.createElement(E,{apply:0!==i,key:`face-${i}`},o.a.createElement(d,{hovered:b&&!!l},o.a.createElement(v,{key:null!=t?t:a,isDim:e,name:a,size:n,src:r}))));t&&y.push(o.a.createElement(r.d,{dangerouslySetInlineStyle:{__style:{zIndex:1}},key:"additionalCount"},o.a.createElement(E,{apply:!0},o.a.createElement(d,{hovered:b&&!!l},o.a.createElement(g,{count:t,size:n}))))),c&&p&&y.push(o.a.createElement(m,{addButtonRef:e,hovered:b&&!!l,overlap:h}));const C=l?o.a.createElement(r.Q,{ref:u,onTap:l,rounding:"pill"},o.a.createElement(r.d,{alignItems:"center",display:"flex"},y)):y;return o.a.createElement(r.d,{alignItems:"center",display:"flex",onMouseEnter:f,onMouseLeave:_},C,!c&&p&&i&&o.a.createElement(r.d,{dangerouslySetInlineStyle:{__style:{zIndex:2}},ref:e},o.a.createElement(s,{onClick:i,overlap:h,size:n})))})}a.d(t,"a",(function(){return E}))},CvCA:function(e,t,a){a.d(t,"a",(function(){return c}));var n=a("q1tI"),o=a.n(n),r=a("TSYQ"),i=a.n(r),l=(a("17x9"),a("n6mq"));function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class c extends n.Component{constructor(...e){super(...e),s(this,"state",{hiding:!1,visible:!1}),s(this,"handleHide",()=>{this.setState({hiding:!0}),this.timeout=setTimeout(this.props.onHide,200)}),s(this,"handleMouseEnter",()=>{this.timeout&&clearTimeout(this.timeout)}),s(this,"handleMouseLeave",()=>{this.timeout=setTimeout(this.handleHide,this.props.duration)})}componentDidMount(){setTimeout(()=>{this.setState({visible:!0})},100),this.timeout=setTimeout(this.handleHide,this.props.duration)}componentWillUnmount(){this.timeout&&clearTimeout(this.timeout)}render(){const{color:e="darkGray",imageUrl:t,href:a,onClick:n,text:r,openNewPage:s}=this.props,c="string"==typeof r?r:`${r[0]} ${r[1]}`,d=t?o.a.createElement("div",{className:"imageWrapper"},o.a.createElement("img",{className:"toastImage",src:t,alt:c})):void 0,h=o.a.createElement(l.U,{color:e,text:r,thumbnail:d});return o.a.createElement("div",{className:i()("ToastBase","react",{visible:this.state.visible},{hiding:this.state.hiding}),onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,"data-test-id":"toast"},a?o.a.createElement("a",{href:a,onClick:n,target:s?"_blank":null,rel:s?"noopener noreferrer":null},h):h)}}s(c,"defaultProps",{duration:2e3})},KEt0:function(e,t,a){a.d(t,"a",(function(){return i}));var n=a("q1tI"),o=a.n(n),r=a("n6mq");function i({size:e}){return o.a.createElement("span",{style:{padding:"0 4px"}},o.a.createElement(r.R,{inline:!0,size:null!=e?e:"md"},"·"))}},O3d3:function(e,t,a){a.d(t,"a",(function(){return m}));const n="facebook",o="twitter",r="google",i="youtube",l="gplus",s="microsoft",c="etsy",d="instagram",h="dropbox";function m(e){return{[n]:{connected:e.connected_to_facebook||!1},[r]:{connected:e.connected_to_google||!1},[i]:{connected:e.connected_to_youtube||!1},[l]:{connected:!!e.gplus_url,url:e.gplus_url},[s]:{connected:e.connected_to_microsoft||!1},[o]:{connected:!!e.twitter_url,url:e.twitter_url},[c]:{connected:e.connected_to_etsy||!1},[d]:{connected:e.connected_to_instagram||!1},[h]:{connected:e.connected_to_dropbox||!1}}}},QoKk:function(e,t,a){var n=a("q1tI"),o=a.n(n),r=(a("w/op"),a("Ye/N")),i=a("rYoy"),l=a("n6mq");const s=["es-AR","es-BZ","es-BO","pt-BR","en-CA","es-CL","zh-CN","es-CO","es-CR","es-DO","es-EC","es-SV","es-GT","es-HN","zh-HK","he","en-JM","ja","en-KE","zh-MO","es-MX","es-NI","es-PA","es-PE","en-PH","es-PR","en-ZA","ko","zh-TW","en-US","es-VE"];var c=a("pLLR");const d=Object(n.lazy)(()=>a.e("Calendar").then(a.t.bind(null,"sQeT",7))),h=(e,t)=>e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear();var m=Object(c.e)((function({onSelectedDate:e,selectedDates:t,requestContext:a}){return o.a.createElement(i.a,null,o.a.createElement(d,{calendarType:s.includes(a.locale)?"US":"ISO 8601",locale:a.locale||"",className:"DatePicker",enableHistoryView:!1,onClickDay:a=>{1===t.length&&t[0]<a?e([t[0],a]):e([a])},minDetail:"month",nextLabel:o.a.createElement(l.q,{accessibilityLabel:r.a._("Next month","BoardForm.BoardFormExperimentalDatePicker","accessibility label on arrow to go to next calendar month"),icon:"arrow-forward"}),next2Label:null,prevLabel:o.a.createElement(l.q,{icon:"arrow-back",accessibilityLabel:r.a._("Previous month","BoardForm.BoardFormExperimentalDatePicker","accessibility label on arrow to go to previous calendar month")}),prev2Label:null,tileClassName:({date:e})=>{const a=[],[n,o]=t;return n&&h(e,n)?(a.push("start"),o&&a.push("rangeStart")):o&&h(e,o)?a.push("rangeEnd"):2===t.length&&e>=n&&e<=o&&a.push("inRange"),a},tileDisabled:({date:e})=>{return e<=new Date},value:t.length?t:new Date,view:"month"}))})),u=a("TiQD");const g=356;t.a=Object(c.e)((function({dates:e,onChange:t,onToggleFlyout:a=(()=>{}),requestContext:i}){const s=Object(n.useRef)(null),[c,d]=Object(n.useState)(!1),[h,b]=Object(n.useState)(e||[]),[p,v]=h||[];let E=p&&p.toLocaleDateString(i.locale)||"";if(v){E+=" - "+h[1].toLocaleDateString(i.locale)}const f=()=>{a(),d(!c)};return o.a.createElement(n.Fragment,null,o.a.createElement("div",{style:{position:"relative"},ref:s},o.a.createElement(l.T,{autoComplete:"off",id:"boardEditDate",onChange:()=>{},onFocus:f,onKeyDown:({event:e})=>{"Backspace"===e.key&&(b([]),t([]))},placeholder:r.a._("Select start and end","BoardForm.BoardFormDateField","placeholder for input field to enter board end and start dates"),size:"lg",value:E}),o.a.createElement(l.d,{dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}},position:"absolute",top:!0,right:!0,padding:4},o.a.createElement(l.q,{color:"darkGray",icon:"calendar",accessibilityLabel:r.a._("Select date","BoardForm.BoardFormDateField","accessibility label on calendar icon")}))),c&&o.a.createElement(l.u,null,o.a.createElement(l.d,{position:"absolute",top:!0,dangerouslySetInlineStyle:{__style:{zIndex:u.a}}},o.a.createElement(l.n,{anchor:s.current,idealDirection:"down",onDismiss:f,size:g,positionRelativeToAnchor:!1},o.a.createElement(l.d,{padding:6,width:g},o.a.createElement(m,{onSelectedDate:e=>{b(e),t(e)},selectedDates:h}))))))}))},ViqK:function(e,t,a){a.d(t,"a",(function(){return s}));var n=a("q1tI"),o=a.n(n),r=a("Cufx"),i=a("3gA6"),l=a("n6mq");function s(e){const{imageUrl:t,name:a,title:n,subtitle:s,accessory:c,linkURL:d,isDim:h}=e,m={__style:{opacity:h?.5:1}};return o.a.createElement(o.a.Fragment,null,a&&n&&o.a.createElement(l.d,{display:"flex",alignItems:"center",paddingX:4,marginBottom:4},o.a.createElement(l.d,{marginEnd:2,dangerouslySetInlineStyle:m},o.a.createElement(i.b,{to:d||""},o.a.createElement(r.a,{outline:!0,size:"md",name:a,src:t}))),o.a.createElement(l.d,{display:"flex",flex:"grow",alignItems:"stretch",direction:"column",dangerouslySetInlineStyle:m},o.a.createElement(i.b,{to:d||""},o.a.createElement(l.R,{color:"darkGray",size:"lg",truncate:!0,weight:"bold"},n)),o.a.createElement(l.R,{truncate:!0,size:"sm",color:"gray"},s)),c&&o.a.createElement(l.d,{marginStart:4},c)))}},VwDf:function(e,t,a){a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return o}));const n=e=>e.toISOString(),o=({currentEventStartDate:e,currentEventEndDate:t,initialEventStartDate:a,initialEventEndDate:o})=>{let r,i;return e&&t?(r=n(e),i=n(t)):t&&(i=n(t)),o&&!t&&(i=""),a&&!e&&(r=""),o&&n(new Date(o))===t&&(i=null),a&&n(new Date(a))===t&&(r=null),{eventEndDate:i,eventStartDate:r}}},ZE2w:function(e,t,a){a.d(t,"c",(function(){return i})),a.d(t,"d",(function(){return l})),a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return c}));var n=a("4dcN"),o=a("eOdZ");const r="collaborator_approve_invite";function i(e,t){return o.a.create("BoardEmailInviteResource",{board_id:e,emails:t}).callCreate()}function l(e,t){return o.a.create("BoardInviteResource",{board_id:e,invited_user_ids:t}).callCreate()}function s(e,t){return a=>{return o.a.create("BoardInviteResource",{board_id:e,invited_user_id:t}).callUpdate().then(()=>{n.a.trackEvent(r,"success")}).catch(()=>n.a.trackEvent(r,"error"))}}function c(e,t,a){return t=>{const{invited_user:n,status:r,board:{id:i}}=e;return o.a.create("accepted"===r?"BoardCollaboratorResource":"BoardInviteResource",{ban:a,board_id:i,field_set_key:"boardEdit",invited_user_id:n.id}).callDelete({showError:!1})}}},mLS1:function(e,t,a){var n=a("q1tI"),o=a.n(n),r=a("Ye/N"),i=a("TiQD"),l=a("eOdZ"),s=a("Wrea"),c=a("xdpg"),d=a("n6mq");function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function m(){return n.createElement("div",{className:"ImageCrop"},n.createElement("div",{className:"holder"},n.createElement(d.d,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,display:"flex",alignItems:"center",justifyContent:"center"},n.createElement(d.K,{accessibilityLabel:r.a._("Loading","accessibility label for loading spinner","accessibility label for loading spinner"),show:!0}))))}const u="236x",g=46,b={arrowButton:{border:0,top:120}};class p extends n.Component{constructor(...e){super(...e),h(this,"state",{deltaY:0,deltaX:0,holderHeight:0,holderWidth:0,isSpinnerShown:!0,startBgPos:{left:0,top:0}}),h(this,"handleUpdateImage",()=>{const e=this.image;if(!e)return;const t=e.offsetHeight,a=e.offsetWidth;this.setState({isSpinnerShown:!1,startBgPos:{left:-(a-this.state.holderWidth)/2,top:-(t-this.state.holderHeight)/2}})}),h(this,"handleOnMouseUp",()=>{this.isDragging=!1,this.setState({startBgPos:{left:this.getBgLeft(),top:this.getBgTop()},deltaX:0,deltaY:0}),this.props.updateImgCrop(this.getCropData())}),h(this,"isDragging",!1)}componentDidMount(){this.holder&&this.setState({holderHeight:this.holder.offsetHeight,holderWidth:this.holder.offsetWidth}),document.body&&document.body.addEventListener("mouseup",this.handleOnMouseUp,!1)}componentDidUpdate(e){e.pin.id!==this.props.pin.id&&this.setState({isSpinnerShown:!0})}componentWillUnmount(){document.body&&document.body.removeEventListener("mouseup",this.handleOnMouseUp)}getFrameBounds(){const{frameHeight:e,frameWidth:t}=this.props,{holderHeight:a,holderWidth:n}=this.state;return{left:n/2-t/2,width:t,height:e,top:a/2-e/2}}getBgLeft(){const{frameWidth:e}=this.props,t=this.getFrameBounds(),a=this.getImgScale(),n=this._getImageDimensions(),o=n.imgHeight*a,r=n.imgWidth*a;let i=0;return o&&r&&((i=this.state.startBgPos.left+this.state.deltaX)+r-e<t.left&&(i=t.left-r+e),i>t.left&&(i=t.left)),i}getBgTop(){const{frameHeight:e}=this.props,t=this.getFrameBounds(),a=this.getImgScale(),n=this._getImageDimensions(),o=n.imgHeight*a,r=n.imgWidth*a;let i=0;return o&&r&&((i=this.state.startBgPos.top+this.state.deltaY)+o-e<t.top&&(i=t.top-o+e),i>t.top&&(i=t.top)),i}getImgScale(){const{frameHeight:e,frameWidth:t}=this.props,{imgHeight:a,imgWidth:n}=this._getImageDimensions(),o=this.getFrameBounds();if(a&&n){let r=a/n;return r=r>=o.height/o.width?t/n:e/a}return 1}getImageBounds(){const{imgHeight:e,imgWidth:t}=this._getImageDimensions();let a={};if(e&&t){const n=this.getImgScale();a={width:n*t,height:n*e}}return a}getBgBounds(){return{left:this.getBgLeft(),top:this.getBgTop()}}getCropData(){const{frameHeight:e,frameWidth:t}=this.props,a=this.getFrameBounds(),n=this.getBgBounds(),o=this.getImgScale();return{cropX:Math.round(-(n.left-a.left)/o),cropY:Math.round(-(n.top-a.top)/o),height:Math.round(e/o),width:Math.round(t/o),scale:o}}handleOnMouseDown(e){0===e.button&&(e.stopPropagation(),this.isDragging=!0,this.originX=e.pageX,this.originY=e.pageY)}handleOnMouseMove(e){this.isDragging&&this.setState({deltaX:e.pageX-(this.originX||0),deltaY:e.pageY-(this.originY||0)})}_getImageDimensions(){const{pin:e}=this.props,t=e.images[u];return{imgHeight:t.height,imgWidth:t.width}}render(){const{boardName:e,frameHeight:t,frameWidth:a,isFirst:o,isLast:i,pin:l,showNextPin:s,showPrevPin:h}=this.props,{isSpinnerShown:m}=this.state,{imgHeight:u,imgWidth:p}=this._getImageDimensions(),v=this.getFrameBounds(),E=this.getImageBounds(),f=this.getBgBounds();let _="";return u&&p&&(_="in"),n.createElement("div",{className:"ImageCrop"},n.createElement("div",{className:"holder",ref:e=>{this.holder=e}},n.createElement("div",{className:"bg",style:f},n.createElement("img",{alt:c.c(r.a._("Board cover for {{ boardName }}"),{boardName:e}),className:_,onLoad:this.handleUpdateImage,ref:e=>{this.image=e},src:l.images["236x"].url,style:E})),n.createElement("div",{className:"mask"},n.createElement("span",{style:{top:0,left:0,right:0,height:v.top}}),n.createElement("span",{style:{top:v.top,left:v.left+a,right:0,height:t}}),n.createElement("span",{style:{top:t+v.top,left:0,right:0,bottom:0}}),n.createElement("span",{style:{top:v.top,left:0,width:v.left,height:t}})),n.createElement("div",{className:"frame",style:v}),n.createElement("div",{className:"drag",onMouseDown:e=>{this.handleOnMouseDown(e)},onMouseMove:e=>{this.handleOnMouseMove(e)}}),n.createElement("div",{className:"spinner",style:{display:m?"":"none"}})),o?null:n.createElement(d.d,{position:"absolute",width:g,height:g,dangerouslySetInlineStyle:{__style:{...b.arrowButton,left:100}}},n.createElement(d.r,{icon:"arrow-back",accessibilityLabel:r.a._("Previous","Label for indicating selecting the previous pin","Label for indicating selecting the previous pin"),onClick:h})),i?null:n.createElement(d.d,{position:"absolute",width:g,height:g,dangerouslySetInlineStyle:{__style:{...b.arrowButton,right:100}}},n.createElement(d.r,{icon:"arrow-forward",accessibilityLabel:r.a._("Next","Label for indicating selecting the previous pin","Label for indicating selecting the previous pin"),onClick:s})))}}h(p,"defaultProps",{frameHeight:236,frameWidth:236});var v=a("zLLH");function E(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function f(e){return e.reduce((e,t)=>("pin"===t.type&&e.push(t),e),[])}function _({boardFeedResource:{data:e},coverPinId:t}){return Math.max(0,f(e||[]).findIndex(e=>e.id===t))}const y=5;var C=Object(v.c)({name:"BoardFeedResource",options:({boardId:e})=>({board_id:e,field_set_key:"images_only_item",filter_section_pins:!1,page_size:50}),key:"boardFeedResource"})(class extends n.Component{constructor(...e){super(...e),E(this,"state",{coverPinIndex:_(this.props),imgCropData:null,previousBoardFeedResourceData:null}),E(this,"handleSave",()=>{const{boardId:e,dispatch:t}=this.props,{coverPinIndex:a,imgCropData:n}=this.state,o=(this.pins||[])[a];if(!o)return;const r=o.images["236x"],i=r.url,c={board_id:e,url:i,pin_id:o.id,pin_image_url:i,...n?{crop_x:n.cropX,crop_y:n.cropY,height:n.height,width:n.width,scale:n.scale}:{}},d={height:r.height,width:r.width,x:n?n.cropX:0,y:n?n.cropY:0};l.a.create("BoardResource",c).callUpdate().then(()=>{this.props.onSave(i),t(Object(s.a)(e,{custom_cover:!0,scale:n?n.scale:1,pin_id:o.id,crop:d,image_url:i}))})}),E(this,"updateImgCrop",e=>this.setState({imgCropData:e})),E(this,"handleShowNextPin",()=>{const{boardFeedResource:{isAtEnd:e,isFetching:t,fetchMore:a}}=this.props,n=(this.pins||[]).length;n&&this.setState(({coverPinIndex:e})=>({coverPinIndex:(e+1)%n}),()=>{this.pins&&this.state.coverPinIndex+y>=this.pins.length&&!e&&!t&&a()})}),E(this,"handleShowPrevPin",()=>{const e=(this.pins||[]).length;e&&this.setState(({coverPinIndex:t})=>({coverPinIndex:(t||e)-1}))})}static getDerivedStateFromProps(e,t){const a=e.boardFeedResource.data,{previousBoardFeedResourceData:n}=t;return!n&&a?{previousBoardFeedResourceData:a,coverPinIndex:_(e)}:{previousBoardFeedResourceData:a}}componentDidUpdate(e){const t=this.props.boardFeedResource.data,a=e.boardFeedResource.data;(t&&a!==t&&t.length||t&&a&&t.length!==a.length)&&t.forEach(e=>{if("pin"===e.type){(new Image).src=e.url}})}get pins(){const{boardFeedResource:{data:e}}=this.props;return e?f(e):void 0}render(){const{boardName:e,frameHeight:t,frameWidth:a,heading:o,onCancel:l}=this.props,{coverPinIndex:s}=this.state,c=this.pins||[],h=c[s];return n.createElement(i.b,{accessibilityModalLabel:r.a._("Change Board Cover","accessible label for modal to change board cover image","accessible label for modal to change board cover image"),size:"lg",heading:o,onDismiss:l},n.createElement(d.d,{position:"relative",dangerouslySetInlineStyle:{__style:{userSelect:"none"}}},h?n.createElement(p,{boardName:e,frameHeight:t,frameWidth:a,isFirst:!s,isLast:s===c.length-1,pin:h,showNextPin:this.handleShowNextPin,showPrevPin:this.handleShowPrevPin,updateImgCrop:this.updateImgCrop}):n.createElement(m,null)),n.createElement(d.d,{display:"flex",justifyContent:"end"},n.createElement(d.d,{padding:2},n.createElement(d.e,{inline:!0,onClick:l,text:r.a._("Cancel")})),n.createElement(d.d,{padding:2},n.createElement(d.e,{disabled:!h,inline:!0,onClick:this.handleSave,text:r.a._("Save Changes","Button for saving board cover edit","Button for saving board cover edit"),color:"red"}))))}}),w=a("0rqM");const S=({label:e,labelId:t})=>t?o.a.createElement(d.t,{htmlFor:t},o.a.createElement(d.R,{size:"sm"},e)):o.a.createElement(d.R,{size:"sm"},e);function I(e){const{children:t,label:a,labelId:r}=e;return o.a.createElement(n.Fragment,null,o.a.createElement(d.d,{marginBottom:2},o.a.createElement(S,{label:a,labelId:r})),t)}const B=138;function k({coverPin:e,handleShowBoardCoverEditModal:t}){const[a,i]=Object(n.useState)(!1);return o.a.createElement(I,{label:r.a._("Board cover","BoardForm.BoardFormCoverButton","Form label for updating board cover")},o.a.createElement(d.d,{width:B,position:"relative"},o.a.createElement(d.Q,{onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),onTap:t,rounding:4},(null==e?void 0:e.custom_cover)?o.a.createElement(n.Fragment,null,o.a.createElement(d.x,{height:B,rounding:4,width:B},o.a.createElement(d.s,{alt:e.image_url,color:"gray",fit:"cover",naturalHeight:e.size&&e.size[0]||B,naturalWidth:e.size&&e.size[0]||B,src:e.image_url})),o.a.createElement(d.d,{position:"absolute",right:!0,bottom:!0,padding:2},o.a.createElement(d.d,{alignItems:"center",display:"flex",height:44,justifyContent:"center",rounding:"circle",width:44,dangerouslySetInlineStyle:{__style:{background:a?"white":"rgba(255, 255, 255, 0.8)"}}},o.a.createElement(d.q,{accessibilityLabel:r.a._("Edit board cover","BoardForm.BoardFormBoardCoverButton","Accessibility label on icon"),icon:"edit",color:"darkGray",size:16})))):o.a.createElement(d.d,{alignItems:"center",color:a?"darkWash":"lightGray",display:"flex",height:B,justifyContent:"center",rounding:4,width:B},o.a.createElement(d.q,{accessibilityLabel:r.a._("Add cover photo","BoardForm.BoardFormCoverButton","Accessibility label on icon"),color:"darkGray",icon:"add",size:24})))))}function D({categories:e,currentCategory:t,onChange:a}){const n=r.a._("What kind of board is it?");return o.a.createElement(I,{label:r.a._("Category","BoardForm.BoardFormCategoriesDropdown","Form field label"),labelId:"boardEditCategory"},o.a.createElement(d.J,{id:"boardEditCategory",name:"category",onChange:a,options:e.map(({name:e,key:t})=>({label:e,value:t})),placeholder:n,size:"lg",value:t||null}))}function x({children:e,label:t,labelId:a,subtext:r}){return o.a.createElement(n.Fragment,null,o.a.createElement(d.d,{alignItems:"center",display:"flex",justifyContent:"between",paddingY:1},o.a.createElement(d.t,{htmlFor:a},o.a.createElement(d.p,{size:"sm"},t)),e),r)}function F({hasCollabBoardEmail:e,isCollaborative:t,onChange:a}){return t&&o.a.createElement(x,{label:r.a._("Email notifications","BoardForm.BoardFormCollaboratorsEmailCheckbox","Form label"),labelId:"emailNotificationsCheckbox",subtext:o.a.createElement(d.R,{color:"gray",size:"lg"},r.a._("Get an email when someone saves Pins to this board","BoardForm.BoardFormCollaboratorsEmailCheckbox","Text explaing field on board form"))},o.a.createElement(d.d,{alignItems:"center",display:"flex",paddingY:2},o.a.createElement(d.d,{marginEnd:1},o.a.createElement(d.N,{switched:e,id:"emailNotificationsCheckbox",name:"email",onChange:a}))))}var R=a("+HMQ"),O=a("88U9"),T=a("8Mj5"),j=a("zpFB");function N({board:e,onCollaboratorInviteClick:t}){return o.a.createElement(R.a,{board:e},e=>{const{limitedCollaborators:a,overflowNumber:n}=Object(O.a)(e.length,e);return o.a.createElement(d.F,{justifyContent:"between"},o.a.createElement(T.a,{additionalCount:n,faces:a.map(e=>({...e,key:e.name})),faceSize:"lg",overlap:j.a}),o.a.createElement(d.r,{accessibilityLabel:r.a._("Invite collaborators","BoardEdit.BoardCollaboratorsAndInviteSection","Accessibility label on button"),bgColor:"lightGray",icon:"add",iconColor:"darkGray",onClick:t,size:"lg"}))})}var P=a("+wrf"),L=a("t+EM"),A=a("ViqK"),M=(a("17x9"),a("TSYQ")),H=a.n(M),z=a("O3d3"),q=a("7w6Q");function U({email:e,isValid:t,onClick:a,showSendEmailText:o}){const i=t?n.createElement("div",{className:"icon"},e[0].toUpperCase()):n.createElement("div",{className:H()("icon","typingEmail")},n.createElement("em",null)),l=t?r.a._("Click to send!"):r.a._("Keep typing!"),s=o?Object(c.c)(r.a._("Email {{ email }}"),{email:e}):Object(c.c)(r.a._("Invite {{ email }}"),{email:e});return n.createElement("div",{className:H()("sendToEmail",{unclickable:!t})},n.createElement("a",{className:"selectableEmailItem",onClick:()=>{t&&a()},role:"button"},n.createElement("div",{className:"left"},i),n.createElement("div",{className:"right"},n.createElement("h4",{className:"title"},s),n.createElement("p",{className:"subtitle"},l))))}function W({email:e,inviteQueue:t,id:a,is_pinner:n,label:i,onClick:l,onHoverEnd:s,onHoverStart:c,send_pin_image:h,type:m}){let u=r.a._("Enter an email address");return n?u=r.a._("On Pinterest"):e?u=e:"facebook_non_pinner"===m?u=r.a._("Facebook"):"gplus_non_pinner"===m&&(u=r.a._("Google")),o.a.createElement(d.Q,{onMouseEnter:c,onMouseLeave:s,onTap:l},o.a.createElement(d.d,{paddingX:2,position:"relative"},h?o.a.createElement("span",{className:"typeaheadImg"},o.a.createElement("img",{alt:"",src:h})):null,o.a.createElement("p",{className:H()("typeaheadName",{hasImage:h})},i),o.a.createElement("div",{className:"titleWrapper"},o.a.createElement("i",{className:H()("titleIcon",{isPinner:n},{isFacebook:"facebook_non_pinner"===m},{isGplus:"gplus_non_pinner"===m})}),o.a.createElement("p",{className:"title"},u)),o.a.createElement(d.d,{top:!0,right:!0,position:"absolute",width:90},t&&o.a.createElement(d.e,{text:t[a]?r.a._("Remove","Remove a board collaborator invite","Remove a board collaborator invite"):r.a._("Add","Add board collaborator invite","Add board collaborator invite"),color:t[a]?"gray":"red",size:"sm"}))))}var V=a("G35+"),X=a("+zF7");const{FACEBOOK:K,GPLUS:Y,YAHOO:G}=V.a;function Q({network:e}){const t={[K]:r.a._("Find friends from Facebook"),[Y]:r.a._("Find friends from Google+"),[G]:r.a._("Find friends from Yahoo")};return o.a.createElement("div",{className:"socialConnect",role:"listitem"},o.a.createElement(d.Q,{fullWidth:!1,onTap:()=>(function(e){X.a.instance().handleConnect(e,!0,{})})(e)},o.a.createElement("div",{className:"socialConnectItem"},o.a.createElement("div",{className:"left"},o.a.createElement("div",{className:H()("icon",`socialConnect-${e}`)},o.a.createElement("em",null))),o.a.createElement("div",{className:"right"},o.a.createElement("h4",{className:"title"},t[e])))))}var $=a("jZhD"),Z=a("joD6"),J=a("TN0d"),ee=a("U4JR"),te=a("ZE2w");function ae(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const ne=[V.a.FACEBOOK];class oe extends n.Component{constructor(...e){super(...e),ae(this,"state",{networks:void 0!==this.props.viewer?this.props.viewer.socialNetwork:null,open:!1,typeaheadSuggestions:[]}),ae(this,"onUserInviteClick",e=>{const{id:t,full_name:a}=e,{boardId:n,onInviteItemClick:o}=this.props;n?o(Object(te.d)(n,[t]),{type:"user",userName:a}):o(e,!0)}),ae(this,"handleBodyClick",e=>{this._results&&!this._results===e.target&&this.setState({open:!1})}),ae(this,"handleTypeaheadSuggestionsChange",e=>{const{viewer:t}=this.props;q.a.increment("web_contacts_search",1,{source:"social_type_ahead"}),this.setState({typeaheadSuggestions:(e||[]).filter(e=>e.id!==t.id)})}),ae(this,"handleOnEmailInviteClick",()=>{const{boardId:e,onInviteItemClick:t,value:a}=this.props;e&&void 0!==a?t(Object(te.c)(e,[a]),{type:"email",email:a}):t(a,!1)}),ae(this,"subscriber",J.b.subscribe("currentUser","socialNetworkUpdated",(e,t,a)=>{this.setState({networks:Object(z.a)(a)})})),ae(this,"logTypeaheadInput",e=>{Object(ee.a)(4113,{component:13029,element:1043,entered_query:e})}),ae(this,"logSearchContactItemClick",e=>{const{value:t}=this.props;Object(ee.a)(101,{component:13029,element:1044,entered_query:t,result_index:e})}),ae(this,"renderResultItems",()=>{const{changeOnTextHover:e,inviteQueue:t}=this.props,a=H()("Typeahead","userSelect",{open:this.state.open}),n=this.state.typeaheadSuggestions.map((a,n)=>o.a.createElement(W,Object.assign({key:n,onClick:()=>{this.onUserInviteClick(a),this.logSearchContactItemClick(n)},onHoverEnd:()=>e?this.restoreTextFieldValue():null,onHoverStart:()=>e?this.forceTextFieldValue(a.label):null,inviteQueue:t},a))).concat(this.getStaticItems()).map((e,t)=>o.a.createElement("li",{key:t},e));return o.a.createElement("div",{className:a,ref:e=>{this._results=e},style:{overflow:"scroll",height:"364px",zIndex:1e3,marginTop:4,borderTop:"none"}},n)})}componentDidMount(){["mousedown","touchstart"].forEach(e=>{document.addEventListener(e,this.handleBodyClick)})}static getDerivedStateFromProps({value:e}){return{open:e&&e.length>0}}componentWillUnmount(){["mousedown","touchstart"].forEach(e=>{document.removeEventListener(e,this.handleBodyClick)}),this.subscriber.unsubscribe()}getStaticItems(){return[...this.getEmailItems(),...this.getSocialItems(this.state.networks)]}getEmailItems(){const{value:e}=this.props,t=e||"";return[o.a.createElement(U,{email:t,isValid:Object(c.g)(t),key:"send-to-email-component",onClick:this.handleOnEmailInviteClick,showSendEmailText:!1})]}getSocialItems(e){return ne.filter(t=>!e||!1===e[t].connected).map((e,t)=>o.a.createElement(Q,{key:`socialConnect-${e}`,network:e}))}forceTextFieldValue(e){this.props.value&&(this.previousValue=this.props.value),this.props.onChange(e)}restoreTextFieldValue(){this.props.onChange(this.previousValue),delete this.previousValue}render(){const{boardId:e,className:t,onChange:a,onKeyDown:n,showInputPlaceholder:i,value:l}=this.props,s=e?{board:e}:null,c=r.a._("Enter name or email","search","search");return o.a.createElement($.a,{onTypeaheadSuggestionsChange:this.handleTypeaheadSuggestionsChange,resourceName:"ShareSuggestionsTypeaheadResource",resourceOptions:{...s,count:25},value:l||""},o.a.createElement("div",{className:H()(t,"reactSocialTypeahead")},o.a.createElement("div",{className:H()("TypeaheadField","userSelect","inputContainer","socialInboxTypeahead")},o.a.createElement(d.T,{id:"collaboratorInviterTypeahead",onChange:({value:e})=>{a(e),this.logTypeaheadInput(e)},onKeyDown:n,placeholder:i?c:"",size:"lg",value:l})),this.renderResultItems()))}}ae(oe,"defaultProps",{changeOnTextHover:!1,onKeyDown:()=>{},showInputPlaceholder:!0,value:""});var re=Object(Z.a)(oe),ie=a("fArA");function le(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var se=Object(ie.compose)(Object(v.c)({name:"BoardInvitesResource",options:e=>({board_id:e.boardId,sort:"viewer_first",field_set_key:"boardEdit",status_filters:"new,accepted,contact_request_not_approved,pending_approval",include_inactive:!0}),key:"invites"},{allowStale:!1}),Z.a)(class extends n.Component{constructor(...e){super(...e),le(this,"state",{scrollContainer:void 0,value:""}),le(this,"handleInviteClick",()=>{const{boardId:e,invites:{refreshData:t}}=this.props,a=this.state.value;Object(c.g)(a)&&Object(te.c)(e,[a]).then(t).finally(()=>{this.setState({value:""})})}),le(this,"handleInviteItemClick",e=>{const{invites:{refreshData:t}}=this.props;e.then(t).finally(()=>{this.setState({value:""})})}),le(this,"handleInviterScrollContainer",e=>{this.state.scrollContainer||this.setState({scrollContainer:e})})}renderInvite(e,t,a){const n={invite:e,onBoardLeave:t,onInviteDidUpdate:a,useGestaltModal:!0,isDim:!1};return o.a.createElement(P.a,n)}render(){const{boardId:e,boardOwner:t,invites:a,onBoardLeave:n}=this.props,{data:i,fetchMore:l,isAtEnd:s,isFetching:c,isLoaded:h,refreshData:m}=a,{full_name:u,image_medium_url:g,username:b}=t;return o.a.createElement("div",null,o.a.createElement("div",{className:"BoardInviteForm collaboratorInvitesNoMargin"},o.a.createElement("div",{className:"inviteWrapper"},o.a.createElement("div",{className:"fillWidth",style:{position:"relative"}},o.a.createElement(re,{boardId:e,onChange:e=>this.setState({value:e}),onInviteItemClick:this.handleInviteItemClick,value:this.state.value})),o.a.createElement(d.e,{inline:!0,onClick:this.handleInviteClick,text:r.a._("Invite","ask to join","ask to join")}))),o.a.createElement("div",{className:"boardEditCollaborators",ref:this.handleInviterScrollContainer},o.a.createElement(A.a,{imageUrl:g,linkURL:`/${b}/`,name:u,subtitle:b,title:u}),h?o.a.createElement(L.a,{boardId:e,fetchMore:l,invites:i||[],isAtEnd:s,isFetching:c,onBoardLeave:n,refreshData:m,renderInvite:this.renderInvite,scrollContainer:this.state.scrollContainer}):null))}}),ce=a("KEt0"),de=a("kmwA"),he=a("0SCs");function me({board:e,currentUserIsOwner:t,handleBoardLeave:a,onCollaboratorInviteClick:n}){const{anyEnabled:i}=Object(he.c)("board_permission_settings"),l=o.a.createElement(d.F,null,o.a.createElement(d.R,{size:"sm",inline:!0},r.a._("Collaborators")),o.a.createElement(ce.a,null),o.a.createElement(d.R,{inline:!0,size:"sm",weight:"bold"},o.a.createElement(d.w,{inline:!0,target:"blank",href:de.a.settings.HELP_BOARDS_INVITE_URL_SRC_CREATE},r.a._("Learn more"))));return o.a.createElement(I,{alignTop:!0,label:l,labelId:"collaborators"},i?o.a.createElement(N,{board:e,onCollaboratorInviteClick:n}):o.a.createElement(se,{boardId:e.id,boardOwner:e.owner,currentUserIsOwner:t,onBoardLeave:a}))}function ue({collaboratorInvitesEnabled:e,isCollaborative:t,onChange:a}){return t&&o.a.createElement(x,{label:r.a._("Let collaborators add people","BoardForm.BoardFormCollaboratorsInviteToggle","Form label"),labelId:"collaboratorInvitesEnabledCheckbox"},o.a.createElement(d.d,{paddingY:2},o.a.createElement(d.N,{switched:e,id:"collaboratorInvitesEnabledCheckbox",name:"collaboratorInvitesEnabled",onChange:a})))}var ge=a("QoKk");function be({boardDates:e,onChange:t,onToggleFlyout:a}){return o.a.createElement(I,{label:r.a._("Dates · Optional—this can help you plan!","BoardForm.BoardFormDateField","Label next to date picker for adding a date to a board"),labelId:"secret"},o.a.createElement(ge.a,{dates:e,onChange:t,onToggleFlyout:a}))}function pe({description:e,descriptionValidatorErrors:t,onChange:a}){const n="boardEditDescription";return o.a.createElement(I,{alignTop:!0,label:r.a._("Description","BoardForm.BoardFormDescription"," Form field label"),labelId:n},o.a.createElement(d.S,{errorMessage:t.join(", "),id:n,name:"description",onChange:a,placeholder:r.a._("What's your board about?"),value:e}))}var ve=({children:e})=>o.a.createElement(d.d,{paddingX:8,role:"list"},n.Children.map(e,(t,a)=>t&&o.a.createElement(d.d,{role:"listitem",marginBottom:a===n.Children.count(e)-1?1:8,key:a},t))),Ee=a("JW66");function fe({isProtectedToggler:e,isToggleDisable:t,onChange:a,privacy:i}){if(!0===e)return o.a.createElement(x,{label:r.a._("Protected board (not listed on user's profile)","BoardForm.BoardFormSecretToggle","protected board"),labelId:"protected"},o.a.createElement(d.d,{paddingY:2},o.a.createElement(d.N,{onChange:a,switched:i===Ee.a.BoardPrivacy.PROTECTED,id:"protected",disabled:t})));if(i!==Ee.a.BoardPrivacy.PROTECTED){const e=r.a._("Keep this board secret","BoardForm.BoardFormSecretToggle","Caption for board settings to set visibility"),l=o.a.createElement(n.Fragment,null,o.a.createElement(d.R,{color:"gray",size:"lg"},r.a._("So only you and collaborators can see it.","BoardForm.BoardFormSecretToggle","notifying the board owner only they and the collaborators can see the board if it set to secret")," ",o.a.createElement(d.w,{inline:!0,target:"blank",href:de.a.settings.HELP_BOARDS_SECRET_URL_SRC_CREATE},r.a._("Learn more","BoardForm.BoardFormSecretToggle","Link to learn more about secret boards"))));return o.a.createElement(x,{label:e,labelId:"secret",subtext:l},o.a.createElement(d.d,{display:"flex",alignItems:"center"},o.a.createElement(d.N,{switched:i===Ee.a.BoardPrivacy.SECRET,id:"secret",name:"secret",onChange:a,disabled:t})))}return null}function _e({allowHomefeedRecommendations:e,onChange:t}){return o.a.createElement(x,{label:r.a._("Personalization","BoardForm.BoardFormRecommendationToggle","form label"),labelId:"recommendation",subtext:o.a.createElement(d.R,{color:"gray",size:"lg"},r.a._("Show Pins inspired by this board in your home feed.","BoardForm.BoardFormRecommendationToggle","Caption for board settings to set visibility"))},o.a.createElement(d.N,{switched:e,id:"recommendation",name:"recommendation",onChange:t}))}function ye({boardOwnerHasActiveAds:e,hasActiveAds:t,isAdAccountOwner:a,onChange:i,privacy:l,showConfirmation:s}){if(!1===a)return o.a.createElement(x,{label:r.a._("Protected board (not listed on user's profile)","BoardForm.BoardFormSecretToggle","protected board"),labelId:"protected"},o.a.createElement(d.d,{paddingY:2},o.a.createElement(d.N,{onChange:()=>void 0,id:"protected",switched:!0,disabled:!0})));if(l!==Ee.a.BoardPrivacy.PROTECTED){const a=r.a._("Keep this board secret","BoardForm.BoardFormSecretToggle","Caption for board settings to set visibility"),c=o.a.createElement(n.Fragment,null,o.a.createElement(d.R,{color:"gray",size:"lg"},e?r.a._("Ads from secret boards won’t run.","BoardForm.BoardFormSecretToggle","notifying the board owner ads will not run if the board is set to secret"):r.a._("So only you and collaborators can see it.","BoardForm.BoardFormSecretToggle","notifying the board owner only they and the collaborators can see the board if it set to secret")," ",o.a.createElement(d.w,{inline:!0,target:"blank",href:de.a.settings.HELP_BOARDS_SECRET_URL_SRC_CREATE},r.a._("Learn more","BoardForm.BoardFormSecretToggle","Link to learn more about secret boards"))));return o.a.createElement(x,{label:a,labelId:"secret",subtext:c},o.a.createElement(d.d,{display:"flex",alignItems:"center"},o.a.createElement(d.N,{switched:"secret"===l,id:"secret",name:"secret",onChange:"public"===l&&t?s:i})))}return null}function Ce({name:e,nameValidatorErrors:t,onChange:a}){return o.a.createElement(I,{label:r.a._("Name","BoardForm.BoardFormTitleInput","Form field label"),labelId:"boardEditName"},o.a.createElement(d.T,{errorMessage:t.join(", "),id:"boardEditName",name:"boardName",onChange:a,placeholder:r.a._('Like "Places to Go" or "Recipes to Make"'),size:"lg",value:e}))}var we=a("4dcN"),Se=a("XCz/"),Ie=a("VwDf"),Be=a("c50B");function ke(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,"a",(function(){return Re}));const De=e=>Object(Be.j)({max:e,maxErrorString:Object(c.i)(r.a._("Please enter no more than {{ maxLength }} characters.","Validation error when a string is too long","Validation error when a string is too long"),{maxLength:e})}),xe=()=>[De(Ee.a.MAX_CHARS_FOR_BOARD_PIN_DESCRIPTION)],Fe=()=>[Object(Be.o)({message:r.a._("Don't forget to name your board!")}),De(Ee.a.MAX_CHARS_FOR_BOARD_TITLE)];class Re extends n.Component{constructor(e){super(e),ke(this,"handleChangeName",({value:e})=>{const t=Object(Be.r)(Fe(),e);this.setState({name:e,nameValidatorErrors:t})}),ke(this,"handleChangeDescription",({value:e})=>{const t=Object(Be.r)(xe(),e);this.setState({description:e,descriptionValidatorErrors:t})}),ke(this,"handleChangeBoardDates",e=>{this.setState({boardDates:e})}),ke(this,"handleChangeCategory",({value:e})=>{"true"!==e&&this.setState({category:e})}),ke(this,"handleChangePrivacyToggle",({value:e})=>{let t="public";e&&(t=this.props.isAdAccount?"protected":"secret"),this.state.privacy!==t&&this.setState({privacy:t})}),ke(this,"handleChangePrivateToggle",({value:e})=>{this.setState({privacy:e?"secret":"public"})}),ke(this,"handleEnableSecret",()=>{this.setState({privacy:"secret",showSecretConfirmation:!1})}),ke(this,"handleShowSecretConfirmation",()=>{this.setState({showSecretConfirmation:!0})}),ke(this,"handleHideSecretConfirmation",()=>{this.setState({showSecretConfirmation:!1})}),ke(this,"handleChangeRecommendationToggle",({value:e})=>{this.setState({allowHomefeedRecommendations:e})}),ke(this,"handleChangeCollabBoardEmail",({value:e})=>{this.setState({collab_board_email:e})}),ke(this,"handleChangeCollaboratorInvitesEnabled",({value:e})=>{this.setState({collaboratorInvitesEnabled:e})}),ke(this,"handleCancel",()=>{we.a.trackEvent(this.props.gaCategory,"click_cancel"),this.props.onClose()}),ke(this,"handleSubmit",e=>{const{board:{event_date:t,event_start_date:a},onSubmit:n}=this.props,{boardDates:o,category:i,collab_board_email:l,collaboratorInvitesEnabled:s,description:c,name:d,privacy:h,allowHomefeedRecommendations:m}=this.state;if(e.preventDefault&&e.preventDefault(),this.submitDisabled())return;const u=d.trim(),g=c.trim(),{eventEndDate:b,eventStartDate:p}=Object(Ie.a)({currentEventStartDate:o.length>1?o[0]:null,currentEventEndDate:o[1]||o[0],initialEventStartDate:a,initialEventEndDate:t});this.setState({submitting:!0,submitError:""}),we.a.trackEvent(this.props.gaCategory,"click_submit"),n({event_start_date:p,event_date:b,name:u,category:i,collab_board_email:l,collaborator_invites_enabled:s,description:g,privacy:h,allow_homefeed_recommendations:m}).then(()=>{this.setState({submitting:!1})}).catch(e=>{let t=r.a._("Uh oh! Something went wrong.");if(e.message){const{message:a,message_detail:n}=e;t=n?`${a} ${n}`:a}else"string"==typeof e&&(t=e);this.setState({submitting:!1,submitError:t})})}),ke(this,"handleShowBoardCoverEditModal",()=>{this.setState({showBoardCoverEdit:!0})}),ke(this,"handleHideBoardCoverEditModal",()=>{this.setState({showBoardCoverEdit:!1})}),ke(this,"handleSaveBoardCoverEditModal",e=>{this.handleHideBoardCoverEditModal();const{onCropChange:t}=this.props;t&&t(e)});const{board:{category:t,collab_board_email:a,collaborator_invites_enabled:n,description:o,event_date:i,event_start_date:l,name:s,pin_count:c,privacy:d,allow_homefeed_recommendations:h}}=e,m=[];l&&m.push(new Date(l)),i&&m.push(new Date(i)),this.state={boardDates:m,category:t,collab_board_email:a,description:o,name:s,pin_count:c,privacy:d,allowHomefeedRecommendations:h,collaboratorInvitesEnabled:n,nameValidatorErrors:[],descriptionValidatorErrors:[],showBoardCoverEdit:!1,showSecretConfirmation:!1,submitting:!1,previousName:s,previousDescription:o,previousCategory:t,previousPrivacy:d}}static getDerivedStateFromProps(e,t){const a={};return e.board.name!==t.previousName&&(a.previousName=e.board.name,a.nameValidatorErrors=Object(Be.r)(Fe(),e.board.name)),e.board.description!==t.previousDescription&&(a.previousDescription=e.board.description,a.descriptionValidatorErrors=Object(Be.r)(xe(),e.board.description)),void 0===t.category&&(a.category=e.board.category),e.board.category!==t.previousCategory&&(a.previousCategory=e.board.category),e.board.privacy!==t.previousPrivacy&&(a.previousPrivacy=e.board.privacy),a}getFormFooter(){const{board:{archived_by_me_at:e},isArchivable:t,isDeletable:a,onArchiveButtonClick:i,onDeleteButtonClick:l,onMergeButtonClick:s,onUnarchiveButtonClick:c,submitText:h}=this.props,{submitError:m,submitting:u}=this.state;return o.a.createElement(n.Fragment,null,o.a.createElement(d.d,{alignItems:"center",display:"flex",justifyContent:"between",wrap:!0},o.a.createElement(d.d,{alignItems:"center",display:"flex"},a&&o.a.createElement(d.d,{"data-test-id":"deleteBoardButton",paddingX:1},o.a.createElement(d.e,{disabled:u,inline:!0,onClick:l,size:"lg",text:r.a._("Delete","button label during board edit","button label during board edit")})),t&&!e&&o.a.createElement(d.d,{paddingX:1},o.a.createElement(d.e,{disabled:u,inline:!0,onClick:i,size:"lg",text:r.a._("Archive","button label during board edit","button label during board edit")})),e&&o.a.createElement(d.d,{paddingX:1},o.a.createElement(d.e,{disabled:u,inline:!0,onClick:c,size:"lg",text:r.a._("Unarchive","button label during board edit","button label during board edit")})),s&&o.a.createElement(d.d,{paddingX:1},o.a.createElement(d.e,{disabled:u,inline:!0,onClick:s,size:"lg",text:r.a._("Merge","button label during board edit","button label during board edit")}))),o.a.createElement(d.d,null,o.a.createElement(d.d,{display:"flex"},o.a.createElement(d.d,{paddingX:1},o.a.createElement(d.e,{color:"red",disabled:this.submitDisabled(),inline:!0,onClick:this.handleSubmit,size:"lg",text:h,type:"submit"}))))),m&&o.a.createElement(d.d,{paddingX:1},o.a.createElement(d.R,{color:"red"},m)))}submitDisabled(){const{descriptionValidatorErrors:e,name:t,nameValidatorErrors:a,submitting:n}=this.state;return!t||a.length>0||e.length>0||n}render(){const{board:e,board:{archived_by_me_at:t,board_owner_has_active_ads:a,collaborator_invites_enabled:l,cover_pin:s,has_active_ads:c,id:h,is_collaborative:m,name:u},categories:g,coverImageHeight:b,coverImageWidth:p,currentUserIsOwner:v,handleBoardLeave:E,isAdAccount:f,isAdAccountOwner:_,isEditable:y,isNameAndSecretView:S,onClose:I,onCollaboratorInviteClick:B,onToggleFlyout:x,title:R}=this.props,{allowHomefeedRecommendations:O,boardDates:T,category:j,collab_board_email:N,collaboratorInvitesEnabled:P,description:L,descriptionValidatorErrors:A,name:M,nameValidatorErrors:H,pin_count:z,privacy:q,showBoardCoverEdit:U,showSecretConfirmation:W}=this.state,V=y&&z>0;let X=o.a.createElement(ve,null,V&&o.a.createElement(k,{coverPin:s,handleShowBoardCoverEditModal:this.handleShowBoardCoverEditModal}),o.a.createElement(Ce,{name:M,nameValidatorErrors:H,onChange:this.handleChangeName}),o.a.createElement(pe,{description:L,descriptionValidatorErrors:A,onChange:this.handleChangeDescription}),g&&o.a.createElement(Se.a,{name:"web_remove_board_categories"},({anyEnabled:e})=>!e&&o.a.createElement(D,{categories:g,currentCategory:j||null,onChange:this.handleChangeCategory})),o.a.createElement(be,{boardDates:T,onChange:this.handleChangeBoardDates,onToggleFlyout:x}),v&&!!E&&!!B&&o.a.createElement(me,{board:e,currentUserIsOwner:v,handleBoardLeave:E,onCollaboratorInviteClick:B}),o.a.createElement(d.d,{marginBottom:-7},o.a.createElement(d.R,{size:"sm"},r.a._("Settings","BoardForm.BoardForm","Section heading in board edit form"))),o.a.createElement(Se.a,{name:"sterling_protected_board_by_owner",activate:!0},({anyEnabled:e})=>e?o.a.createElement(fe,{isProtectedToggler:!!f,isToggleDisable:!!f&&!_,onChange:this.handleChangePrivacyToggle,privacy:q}):o.a.createElement(ye,{boardOwnerHasActiveAds:a,hasActiveAds:c,isAdAccountOwner:_,onChange:this.handleChangePrivateToggle,privacy:q,showConfirmation:this.handleShowSecretConfirmation})),!t&&o.a.createElement(_e,{allowHomefeedRecommendations:O,onChange:this.handleChangeRecommendationToggle}),o.a.createElement(F,{hasCollabBoardEmail:N,isCollaborative:m,onChange:this.handleChangeCollabBoardEmail}),o.a.createElement(ue,{collaboratorInvitesEnabled:P,isCollaborative:m,onChange:this.handleChangeCollaboratorInvitesEnabled}));return v?S&&(X=o.a.createElement(ve,null,o.a.createElement(Ce,{name:M,nameValidatorErrors:H,onChange:this.handleChangeName}),o.a.createElement(be,{onChange:this.handleChangeBoardDates,onToggleFlyout:x}),o.a.createElement(Se.a,{name:"sterling_protected_board_by_owner",activate:!0},({anyEnabled:e})=>e?o.a.createElement(fe,{isProtectedToggler:!!f,isToggleDisable:!!f&&!_,onChange:this.handleChangePrivacyToggle,privacy:q}):o.a.createElement(ye,{boardOwnerHasActiveAds:a,hasActiveAds:c,isAdAccountOwner:!!_,onChange:this.handleChangePrivateToggle,privacy:q,showConfirmation:this.handleShowSecretConfirmation})))):X=o.a.createElement(ve,null,l&&!!E&&!!B&&o.a.createElement(me,{board:e,currentUserIsOwner:v,handleBoardLeave:E,onCollaboratorInviteClick:B}),o.a.createElement(F,{hasCollabBoardEmail:N,isCollaborative:m,onChange:this.handleChangeCollabBoardEmail})),o.a.createElement(n.Fragment,null,o.a.createElement(i.b,{accessibilityModalLabel:r.a._("Board form","BoardForm.BoardForm","Accessibility label on board form"),size:"sm",onDismiss:I,footer:this.getFormFooter(),heading:R},o.a.createElement(d.d,{marginEnd:"auto",marginStart:"auto",rounding:2},o.a.createElement("form",{method:"post",onSubmit:this.handleSubmit},X))),U&&o.a.createElement(C,{boardId:h,boardName:M,coverPinId:null==s?void 0:s.pin_id,frameHeight:b,frameWidth:p,heading:`${r.a._("Change Board Cover")}/ ${u}`,onCancel:this.handleHideBoardCoverEditModal,onSave:this.handleSaveBoardCoverEditModal}),W&&o.a.createElement(w.a,{confirmButtonLabel:r.a._("Make secret","Setting the boards visibility to secret","Setting the boards visibility to secret"),heading:r.a._("Are you sure?","Warning label asking users to be sure of their action","Warning label asking users to be sure of their action"),message:r.a._("If you make this board secret, some active ads will stop running","Explicitly warning users of the board visibility action they are doing","Explicitly warning users of the board visibility action they are doing"),onCancel:this.handleHideSecretConfirmation,onConfirm:this.handleEnableSecret}))}}ke(Re,"defaultProps",{isNameAndSecretView:!1})},"t+EM":function(e,t,a){a.d(t,"a",(function(){return l}));var n=a("q1tI"),o=a("Ye/N"),r=a("3j7w"),i=a("n6mq");function l(e){const{fetchMore:t,invites:a,isAtEnd:l,isFetching:s,onBoardLeave:c,refreshData:d,scroll:h,renderInvite:m}=e;return n.createElement("div",null,h&&n.createElement(r.a,{scrollBuffer:3*h.container.clientHeight,scrollHeight:h.container.scrollHeight,scrollTop:h.top,isAtEnd:l,isFetching:s,fetchMore:t}),a.map((e,t)=>e&&e.invited_user&&e.invited_user.id?n.createElement(i.d,{key:t},m(e,c,d)):null),s&&!l&&n.createElement(i.K,{accessibilityLabel:o.a._("loading board invites","accessibility label for board collaborator invites loading spinner","accessibility label for board collaborator invites loading spinner"),show:!0}))}},"w/op":function(e,t,a){},zLLH:function(e,t,a){a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return h})),a.d(t,"c",(function(){return u}));var n=a("q1tI"),o=a("/MKj"),r=a("7w6Q"),i=(a("17x9"),a("T+ZI")),l=a("aK+E"),s=a("Wer7");function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const d="-end-";function h(e={},t){return Object(l.a)("function"==typeof e?e(t):e)}function m(e={},t){return"function"==typeof e?e(t):e}function u(e,t={}){const a=e.key;function l(t){const n={};let o,l,s,c,m={fetching:n,data:n};const u={};function g(n,i,d){n&&(o=n),i&&(l=i),d&&(s=d);let h=t;return o&&o.dispatch||((h=(...a)=>{var n,o,i;const l=null==a?void 0:null===(n=a[0])||void 0===n?void 0:n.type;return("RESOURCE_FETCH"===l||"RESOURCE_PREFETCH_READ"===l||"RESOURCE_FETCH_MORE"===l)&&(null==a?void 0:null===(o=a[0])||void 0===o?void 0:null===(i=o.payload)||void 0===i?void 0:i.name)===e.name||r.a.increment("webapp.withResource.access-dispatch",.1,{dispatchArgs:JSON.stringify(a),resource:e.name,key:e.key,level:"warn"}),t(...a)}).originalDispatch=t),c={...o,dispatch:h,[a]:l,...s}}return function({resources:t,history:a},l){const{fetching:s,data:b}=t,p=!(o&&Object(i.a)(o,l)),v=!(s===m.fetching&&b===m.data);if(!p&&!v&&c)return c;const E=h(e.options,l);if(p&&!v&&c)return g(l);const f=s[e.name]||n,_=m.fetching[e.name]||n,y=b[e.name]||n,C=m.data[e.name]||n;u[e.name]||(0===Object.keys(y).length?r.a.increment("webapp.withResource.no-cache",.05,{resource:e.name,cache_size:0,level:"warn",v:2,xFoundKeys:null,xExpectedKey:E}):E in y?r.a.increment("webapp.withResource.cache-hit",.05,{resource:e.name,cache_size:Object.keys(y).length,level:"success",v:2}):r.a.increment("webapp.withResource.populated-cache-miss",.05,{resource:e.name,cache_size:Object.keys(y).length,level:"error",v:2,xFoundKeys:JSON.stringify(Object.keys(y)),xExpectedKey:E})),u[e.name]=!0;const w=f!==_||y!==C||f[E]!==_[E]||y[E]!==C[E];if(!p&&!w&&c)return c;if(p&&!w&&c)return g(l);m={fetching:s,data:b};const{data:S,error:I,nextBookmark:B,isPrefetch:k,prefetchHasBeenRead:D}=y[E]||{},x=Boolean(f[E]),F=Boolean(y[E]);return g(l,{data:S,error:I,isAtEnd:F&&!x&&B===d,isFetching:x,isLoaded:F,nextBookmark:B,isPrefetch:k,prefetchHasBeenRead:D},{__internal_history:a})}}return function(r){class i extends n.Component{constructor(...a){super(...a),c(this,"state",{isRefreshing:!1}),c(this,"optionsKey",h(e.options,this.props)),c(this,"fetchDisabled",e=>!!t.dangerouslyDisableFetch&&t.dangerouslyDisableFetch(e||this.props)),c(this,"loadData",a=>{this.fetchDisabled(a)||a.dispatch(Object(s.a)(e.name,m(e.options,a),t.headers))}),c(this,"fetchMore",()=>{const{dispatch:a}=this.props;this.fetchDisabled()||a(Object(s.d)(e.name,m(e.options,this.props),t.headers))}),c(this,"refreshData",()=>{this.fetchDisabled()||(this.loadData(this.props),this.setState({isRefreshing:!0}))})}UNSAFE_componentWillMount(){const{dispatch:n,enabledRouteRefreshOverride:o,__internal_history:r,[a]:i}=this.props;if(!i)return;const l="UserHomefeedResource"===e.name&&void 0!==o?o:t.enabledRouteRefresh;i.isLoaded&&l&&r.current&&"POP"!==r.current.action&&!this.fetchDisabled()?this.setState({isRefreshing:!0}):i.isLoaded&&r.current&&"POP"!==r.current.action&&t.acceptPrefetch&&i.isPrefetch&&!i.prefetchHasBeenRead&&!this.fetchDisabled()&&n(Object(s.h)(e.name,m(e.options,this.props)))}componentDidMount(){const{[a]:e}=this.props,{isRefreshing:n}=this.state;!1!==t.allowStale&&e.isLoaded&&!n||this.loadData(this.props)}UNSAFE_componentWillReceiveProps(t){const{[a]:n}=this.props,{isRefreshing:o}=this.state,r=h(e.options,t);r!==this.optionsKey&&(this.loadData(t),this.optionsKey=r),o&&n.data!==t[a].data&&this.setState({isRefreshing:!1})}render(){const{[a]:e}=this.props,{isRefreshing:t}=this.state;e.fetchMore=this.fetchMore,e.refreshData=this.refreshData,e.isRefreshing=t;const{__internal_history:o,...i}=this.props;return n.createElement(r,i)}}return c(i,"WrappedComponent",r),c(i,"displayName",`WithResource[${e.name}](${r.displayName||r.name||""})`),Object(o.connectAdvanced)(l)(i)}}},zpFB:function(e,t,a){a.d(t,"a",(function(){return n}));const n=-4}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/js/17-662755c183c8694e9508.mjs.map